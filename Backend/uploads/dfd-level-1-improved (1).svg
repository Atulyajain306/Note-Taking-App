<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 700">
  <!-- Background -->
  <rect width="900" height="700" fill="#f8f9fa" />
  
  <!-- Title -->
  <text x="450" y="40" font-family="Arial" font-size="24" font-weight="bold" text-anchor="middle">Level 1: Detailed DFD</text>
  <text x="450" y="70" font-family="Arial" font-size="18" text-anchor="middle">AI-Based Mental Health Assistant</text>
  
  <!-- External Entities -->
  <!-- User -->
  <rect x="50" y="150" width="120" height="60" fill="#d5e8d4" stroke="#000000" stroke-width="2" rx="5" ry="5" />
  <text x="110" y="185" font-family="Arial" font-size="16" text-anchor="middle">User</text>
  
  <!-- Healthcare Provider -->
  <rect x="50" y="450" width="120" height="60" fill="#d5e8d4" stroke="#000000" stroke-width="2" rx="5" ry="5" />
  <text x="110" y="485" font-family="Arial" font-size="16" text-anchor="middle">Healthcare Provider</text>
  
  <!-- Third-Party APIs -->
  <rect x="730" y="450" width="120" height="60" fill="#d5e8d4" stroke="#000000" stroke-width="2" rx="5" ry="5" />
  <text x="790" y="485" font-family="Arial" font-size="16" text-anchor="middle">Third-Party APIs</text>
  
  <!-- Processes -->
  <!-- User Interaction Management -->
  <circle cx="250" y="180" r="70" fill="#6c8ebf" stroke="#000000" stroke-width="2" />
  <text x="250" y="170" font-family="Arial" font-size="16" text-anchor="middle" fill="#ffffff">1.0</text>
  <text x="250" y="190" font-family="Arial" font-size="16" text-anchor="middle" fill="#ffffff">User Interaction</text>
  <text x="250" y="210" font-family="Arial" font-size="16" text-anchor="middle" fill="#ffffff">Management</text>
  
  <!-- AI Engine -->
  <circle cx="450" y="300" r="70" fill="#6c8ebf" stroke="#000000" stroke-width="2" />
  <text x="450" y="290" font-family="Arial" font-size="16" text-anchor="middle" fill="#ffffff">2.0</text>
  <text x="450" y="320" font-family="Arial" font-size="16" text-anchor="middle" fill="#ffffff">AI Engine</text>
  
  <!-- Alert & Notification System -->
  <circle cx="250" y="450" r="70" fill="#6c8ebf" stroke="#000000" stroke-width="2" />
  <text x="250" y="440" font-family="Arial" font-size="16" text-anchor="middle" fill="#ffffff">3.0</text>
  <text x="250" y="460" font-family="Arial" font-size="16" text-anchor="middle" fill="#ffffff">Alert &</text>
  <text x="250" y="480" font-family="Arial" font-size="16" text-anchor="middle" fill="#ffffff">Notification System</text>
  
  <!-- Third-Party Integration -->
  <circle cx="650" y="450" r="70" fill="#6c8ebf" stroke="#000000" stroke-width="2" />
  <text x="650" y="440" font-family="Arial" font-size="16" text-anchor="middle" fill="#ffffff">4.0</text>
  <text x="650" y="460" font-family="Arial" font-size="16" text-anchor="middle" fill="#ffffff">Integration with</text>
  <text x="650" y="480" font-family="Arial" font-size="16" text-anchor="middle" fill="#ffffff">Third-Party Services</text>
  
  <!-- Data Stores -->
  <!-- User Profile Database -->
  <line x1="300" y1="580" x2="600" y2="580" stroke="#000000" stroke-width="2" />
  <text x="310" y="570" font-family="Arial" font-size="16" fill="#000000">D1 User Profile Database</text>
  
  <!-- Mental Health Knowledge Base -->
  <line x1="300" y1="630" x2="600" y2="630" stroke="#000000" stroke-width="2" />
  <text x="310" y="620" font-family="Arial" font-size="16" fill="#000000">D2 Mental Health Knowledge Base</text>
  
  <!-- Session Logs -->
  <line x1="300" y1="680" x2="600" y2="680" stroke="#000000" stroke-width="2" />
  <text x="310" y="670" font-family="Arial" font-size="16" fill="#000000">D3 Session Logs</text>
  
  <!-- Data Flow Arrows -->
  <!-- User to User Interaction Management -->
  <line x1="170" y1="170" x2="180" y2="170" stroke="#000000" stroke-width="2" marker-end="url(#arrowhead)" />
  <text x="175" y="155" font-family="Arial" font-size="12" text-anchor="middle" fill="#000000" stroke="#ffffff" stroke-width="0.5">Inputs</text>
  
  <!-- User Interaction Management to AI Engine -->
  <line x1="310" y1="220" x2="390" y2="260" stroke="#000000" stroke-width="2" marker-end="url(#arrowhead)" />
  <text x="350" y="225" font-family="Arial" font-size="12" text-anchor="middle" fill="#000000" stroke="#ffffff" stroke-width="0.5">Processed inputs</text>
  
  <!-- AI Engine to User Interaction Management -->
  <line x1="390" y1="240" x2="310" y2="200" stroke="#000000" stroke-width="2" marker-end="url(#arrowhead)" />
  <text x="350" y="205" font-family="Arial" font-size="12" text-anchor="middle" fill="#000000" stroke="#ffffff" stroke-width="0.5">Responses</text>
  
  <!-- User Interaction Management to User -->
  <line x1="180" y1="150" x2="170" y2="150" stroke="#000000" stroke-width="2" marker-end="url(#arrowhead)" />
  <text x="175" y="135" font-family="Arial" font-size="12" text-anchor="middle" fill="#000000" stroke="#ffffff" stroke-width="0.5">Responses</text>
  
  <!-- AI Engine to Alert & Notification System -->
  <line x1="400" y1="360" x2="320" y2="410" stroke="#000000" stroke-width="2" marker-end="url(#arrowhead)" />
  <text x="360" y="400" font-family="Arial" font-size="12" text-anchor="middle" fill="#000000" stroke="#ffffff" stroke-width="0.5">Critical situations</text>
  
  <!-- Alert & Notification System to Healthcare Provider -->
  <line x1="180" y1="450" x2="170" y2="450" stroke="#000000" stroke-width="2" marker-end="url(#arrowhead)" />
  <text x="175" y="435" font-family="Arial" font-size="12" text-anchor="middle" fill="#000000" stroke="#ffffff" stroke-width="0.5">Alerts</text>
  
  <!-- AI Engine to Third-Party Integration -->
  <line x1="510" y1="340" x2="590" y2="410" stroke="#000000" stroke-width="2" marker-end="url(#arrowhead)" />
  <text x="550" y="360" font-family="Arial" font-size="12" text-anchor="middle" fill="#000000" stroke="#ffffff" stroke-width="0.5">Data requests</text>
  
  <!-- Third-Party Integration to AI Engine -->
  <line x1="590" y1="390" x2="510" y2="330" stroke="#000000" stroke-width="2" marker-end="url(#arrowhead)" />
  <text x="550" y="340" font-family="Arial" font-size="12" text-anchor="middle" fill="#000000" stroke="#ffffff" stroke-width="0.5">External data</text>
  
  <!-- Third-Party Integration to Third-Party APIs -->
  <line x1="720" y1="450" x2="730" y2="450" stroke="#000000" stroke-width="2" marker-end="url(#arrowhead)" />
  <text x="725" y="435" font-family="Arial" font-size="12" text-anchor="middle" fill="#000000" stroke="#ffffff" stroke-width="0.5">Requests</text>
  
  <!-- Third-Party APIs to Third-Party Integration -->
  <line x1="730" y1="470" x2="720" y2="470" stroke="#000000" stroke-width="2" marker-end="url(#arrowhead)" />
  <text x="725" y="485" font-family="Arial" font-size="12" text-anchor="middle" fill="#000000" stroke="#ffffff" stroke-width="0.5">Data</text>
  
  <!-- AI Engine to User Profile Database -->
  <line x1="430" y1="370" x2="430" y2="580" stroke="#000000" stroke-width="2" marker-end="url(#arrowhead)" />
  <text x="410" y="475" font-family="Arial" font-size="12" text-anchor="middle" fill="#000000" stroke="#ffffff" stroke-width="0.5">Store profile data</text>
  
  <!-- AI Engine to Mental Health Knowledge Base -->
  <line x1="450" y1="370" x2="450" y2="630" stroke="#000000" stroke-width="2" marker-end="url(#arrowhead)" />
  <text x="470" y="500" font-family="Arial" font-size="12" text-anchor="middle" fill="#000000" stroke="#ffffff" stroke-width="0.5">Access knowledge</text>
  
  <!-- AI Engine to Session Logs -->
  <line x1="470" y1="370" x2="470" y2="680" stroke="#000000" stroke-width="2" marker-end="url(#arrowhead)" />
  <text x="490" y="525" font-family="Arial" font-size="12" text-anchor="middle" fill="#000000" stroke="#ffffff" stroke-width="0.5">Log sessions</text>
  
  <!-- User Profile Database to AI Engine -->
  <line x1="410" y1="580" x2="410" y2="370" stroke="#000000" stroke-width="2" marker-end="url(#arrowhead)" />
  <text x="390" y="475" font-family="Arial" font-size="12" text-anchor="middle" fill="#000000" stroke="#ffffff" stroke-width="0.5">Retrieve profile</text>
  
  <!-- Mental Health Knowledge Base to AI Engine -->
  <line x1="390" y1="630" x2="390" y2="370" stroke="#000000" stroke-width="2" marker-end="url(#arrowhead)" />
  <text x="370" y="500" font-family="Arial" font-size="12" text-anchor="middle" fill="#000000" stroke="#ffffff" stroke-width="0.5">Get recommendations</text>
  
  <!-- Session Logs to AI Engine -->
  <line x1="370" y1="680" x2="370" y2="370" stroke="#000000" stroke-width="2" marker-end="url(#arrowhead)" />
  <text x="350" y="525" font-family="Arial" font-size="12" text-anchor="middle" fill="#000000" stroke="#ffffff" stroke-width="0.5">Access history</text>
  
  <!-- Arrowhead marker definition -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#000000" />
    </marker>
  </defs>
</svg>
